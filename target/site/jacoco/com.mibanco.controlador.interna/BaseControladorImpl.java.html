<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BaseControladorImpl.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">miBanco</a> &gt; <a href="index.source.html" class="el_package">com.mibanco.controlador.interna</a> &gt; <span class="el_source">BaseControladorImpl.java</span></div><h1>BaseControladorImpl.java</h1><pre class="source lang-java linenums">package com.mibanco.controlador.interna;

import com.mibanco.controlador.util.BaseControlador;
import com.mibanco.vista.util.BaseVista;
import com.mibanco.servicio.util.BaseServicio;
import com.mibanco.modelo.Identificable;
import java.util.Optional;

/**
 * Implementación base para todos los controladores
 * Proporciona la funcionalidad común que comparten todos los controladores
 * @param &lt;T&gt; Tipo de DTO que maneja el controlador
 * @param &lt;E&gt; Tipo de entidad que debe implementar Identificable
 * @param &lt;ID&gt; Tipo del identificador
 * @param &lt;O&gt; Tipo del enum para operaciones
 */
abstract class BaseControladorImpl&lt;T, E extends Identificable, ID, O extends Enum&lt;O&gt;&gt; implements BaseControlador {
    
    protected final BaseServicio&lt;T, E, ID, O&gt; servicio;
    protected final BaseVista&lt;T&gt; vista;
    
    /**
     * Constructor protegido que inicializa el servicio y la vista
     * @param servicio Servicio a utilizar
     * @param vista Vista a utilizar
     */
<span class="nc" id="L27">    protected BaseControladorImpl(BaseServicio&lt;T, E, ID, O&gt; servicio, BaseVista&lt;T&gt; vista) {</span>
<span class="nc" id="L28">        this.servicio = servicio;</span>
<span class="nc" id="L29">        this.vista = vista;</span>
<span class="nc" id="L30">    }</span>
    
    /**
     * Método protegido para manejar operaciones que devuelven Optional
     * @param resultado Optional con el resultado de la operación
     * @param mensajeExito Mensaje a mostrar en caso de éxito
     * @param mensajeError Mensaje a mostrar en caso de error
     */
    protected void manejarResultado(Optional&lt;?&gt; resultado, String mensajeExito, String mensajeError) {
<span class="nc" id="L39">        resultado.ifPresentOrElse(</span>
<span class="nc" id="L40">            r -&gt; vista.mostrarMensaje(mensajeExito),</span>
<span class="nc" id="L41">            () -&gt; vista.mostrarMensaje(mensajeError)</span>
        );
<span class="nc" id="L43">    }</span>
    
    /**
     * Método protegido para confirmar una acción sobre una entidad
     * @param entidad Entidad sobre la que se realizará la acción
     * @param titulo Título de la operación
     * @param mensaje Mensaje de confirmación
     * @return true si se confirma la acción, false en caso contrario
     */
    protected boolean confirmarOperacion(T entidad, String titulo, String mensaje) {
<span class="nc" id="L53">        return vista.confirmarAccion(entidad, titulo, mensaje);</span>
    }
    
    /**
     * Método protegido para ejecutar una operación con confirmación
     * @param entidad Entidad sobre la que se realizará la operación
     * @param operacion Operación a realizar
     * @param titulo Título de la operación
     * @param mensajeConfirmacion Mensaje de confirmación
     * @param mensajeExito Mensaje de éxito
     * @param mensajeError Mensaje de error
     */
    protected void ejecutarOperacionConConfirmacion(
            T entidad,
            Runnable operacion,
            String titulo,
            String mensajeConfirmacion,
            String mensajeExito,
            String mensajeError) {
        
<span class="nc bnc" id="L73" title="All 2 branches missed.">        if (confirmarOperacion(entidad, titulo, mensajeConfirmacion)) {</span>
            try {
<span class="nc" id="L75">                operacion.run();</span>
<span class="nc" id="L76">                vista.mostrarMensaje(mensajeExito);</span>
<span class="nc" id="L77">            } catch (Exception e) {</span>
<span class="nc" id="L78">                vista.mostrarMensaje(mensajeError + &quot;: &quot; + e.getMessage());</span>
            }
        }
<span class="nc" id="L81">    }</span>
} 
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.10.202304240956</span></div></body></html>