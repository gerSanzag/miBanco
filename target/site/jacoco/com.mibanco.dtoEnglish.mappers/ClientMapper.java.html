<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ClientMapper.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">miBanco</a> &gt; <a href="index.source.html" class="el_package">com.mibanco.dtoEnglish.mappers</a> &gt; <span class="el_source">ClientMapper.java</span></div><h1>ClientMapper.java</h1><pre class="source lang-java linenums">package com.mibanco.dtoEnglish.mappers;

import com.mibanco.dtoEnglish.ClientDTO;
import com.mibanco.modelEnglish.Client;

import java.util.List;
import java.util.Optional;
import java.util.stream.Collectors;

/**
 * Mapper implementation for Client using functional approach
 * No automatic ID generation (handled by the repository)
 */
<span class="fc" id="L14">public class ClientMapper implements Mapper&lt;Client, ClientDTO&gt; {</span>

    /**
     * Converts a Client to ClientDTO
     * Strictly functional implementation with Optional
     */
    @Override
    public Optional&lt;ClientDTO&gt; toDto(Optional&lt;Client&gt; clientOpt) {
<span class="fc" id="L22">        return clientOpt.map(client -&gt; ClientDTO.builder()</span>
<span class="fc" id="L23">                .id(client.getId()) // id</span>
<span class="fc" id="L24">                .firstName(client.getFirstName()) // nombre</span>
<span class="fc" id="L25">                .lastName(client.getLastName()) // apellido</span>
<span class="fc" id="L26">                .dni(client.getDni())</span>
<span class="fc" id="L27">                .email(client.getEmail())</span>
<span class="fc" id="L28">                .phone(client.getPhone()) // telefono</span>
<span class="fc" id="L29">                .birthDate(client.getBirthDate()) // fechaNacimiento</span>
<span class="fc" id="L30">                .address(client.getAddress()) // direccion</span>
<span class="fc" id="L31">                .build());</span>
    }

    /**
     * Converts a ClientDTO to Client
     * Strictly functional implementation with Optional
     * Copies all fields from the DTO, including ID if present
     */
    @Override
    public Optional&lt;Client&gt; toEntity(Optional&lt;ClientDTO&gt; dtoOpt) {
<span class="fc" id="L41">        return dtoOpt.map(dto -&gt; Client.builder()</span>
<span class="fc" id="L42">                .id(dto.getId()) // id</span>
<span class="fc" id="L43">                .firstName(dto.getFirstName()) // nombre</span>
<span class="fc" id="L44">                .lastName(dto.getLastName()) // apellido</span>
<span class="fc" id="L45">                .dni(dto.getDni())</span>
<span class="fc" id="L46">                .email(dto.getEmail())</span>
<span class="fc" id="L47">                .phone(dto.getPhone()) // telefono</span>
<span class="fc" id="L48">                .birthDate(dto.getBirthDate()) // fechaNacimiento</span>
<span class="fc" id="L49">                .address(dto.getAddress()) // direccion</span>
<span class="fc" id="L50">                .build());</span>
    }
   
    /**
     * Overload that accepts Client directly
     * For convenience in contexts not using Optional
     */
    public Optional&lt;ClientDTO&gt; toDtoDirect(Client client) {
<span class="fc" id="L58">        return toDto(Optional.ofNullable(client));</span>
    }
    
    /**
     * Overload that accepts ClientDTO directly
     * For convenience in contexts not using Optional
     */
    public Optional&lt;Client&gt; toEntityDirect(ClientDTO dto) {
<span class="fc" id="L66">        return toEntity(Optional.ofNullable(dto));</span>
    }
    
    /**
     * Converts a list of Client to a list of ClientDTO
     * Using functional programming with streams
     * @return Optional with the list of DTOs or Optional.empty() if input is null
     */
    public Optional&lt;List&lt;ClientDTO&gt;&gt; toDtoList(Optional&lt;List&lt;Client&gt;&gt; clients) {
<span class="fc" id="L75">        return clients.map(list -&gt; list.stream()</span>
<span class="fc" id="L76">                        .map(client -&gt; toDto(Optional.of(client)).orElse(null))</span>
<span class="fc" id="L77">                        .filter(java.util.Objects::nonNull)</span>
<span class="fc" id="L78">                .collect(Collectors.toList()));</span>
    }
    
    /**
     * Overload that accepts List&lt;Client&gt; directly
     */
    public Optional&lt;List&lt;ClientDTO&gt;&gt; toDtoList(List&lt;Client&gt; clients) {
<span class="fc" id="L85">        return toDtoList(Optional.ofNullable(clients));</span>
    }
    
    /**
     * Converts a list of ClientDTO to a list of Client
     * Using functional programming with streams
     * @return Optional with the list of entities or Optional.empty() if input is null
     */
    public Optional&lt;List&lt;Client&gt;&gt; toEntityList(Optional&lt;List&lt;ClientDTO&gt;&gt; dtos) {
<span class="fc" id="L94">        return dtos.map(list -&gt; list.stream()</span>
<span class="fc" id="L95">                        .map(dto -&gt; toEntity(Optional.of(dto)).orElse(null))</span>
<span class="fc" id="L96">                        .filter(java.util.Objects::nonNull)</span>
<span class="fc" id="L97">                .collect(Collectors.toList()));</span>
    }
    
    /**
     * Overload that accepts List&lt;ClientDTO&gt; directly
     */
    public Optional&lt;List&lt;Client&gt;&gt; toEntityList(List&lt;ClientDTO&gt; dtos) {
<span class="fc" id="L104">        return toEntityList(Optional.ofNullable(dtos));</span>
    }
} 
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.10.202304240956</span></div></body></html>